<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>

<body>
    <div id="app">
        <!-- 使用 component 组件 绑定 is 属性来创建一个动态组件 -->
        <!-- 动态组件 component 的组件值会跟随 绑定的is属性而变化 -->
        <!-- 官网：https://cn.vuejs.org/v2/guide/components-dynamic-async.html -->
        <!-- 当动态组件切换组件时，上一个组件会被销毁，下一个组件会被创建 -->
        <!-- <component :is="c"></component> -->
        <keep-alive>
            <!-- keep-alive 里的动态组件在切换组件时不会被销毁 -->
            <component :is="c"></component>
        </keep-alive>
        <div>
            <button @click="switchComponent(1)">component1</button>
            <button @click="switchComponent(2)">component2</button>
        </div>
    </div>
</body>
<script>

    const Component1 = {
        template: `
            <div>
                <h1>Component1</h1>
                <input/>
            </div>
        `,
        // 以下生命周期函数将在切换组件时触发
        created() {
            console.log('created');
        },
        destroyed() {
            console.log('destroyed');
        }
    }

    const Component2 = {
        template: `
            <div>
                <h1>Component2</h1>
                <input/>
            </div>
        `
    }

    let app = new Vue({
        el: '#app',
        data() {
            return {
                c: Component1
            }
        },
        methods: {
            switchComponent(num) {
                this.c = num === 1 ? Component1 : Component2
            }
        }
    })
</script>

</html>